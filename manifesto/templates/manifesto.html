{% extends "base.html" %}

{% block content %}

<div class=bar_header>Poetic Manifesto</div>

<div class=article id=article>
    <div class=articleIntro>
        It is what is it.
    </div>
    <div class=articleNav id=articleNav>
        <button class='articleBtn' id='toggleShowAllNotes'>
            Show/Hide All Notes</button>
    </div>
	<div id='controlsBox'></div>
    <div id='maniBox'></div>
</div>
_
<p><em>Version 2.0.1, 2021.04.20</em></p>

<script>
	// Write data into array of objects attached to maniBox 
	let maniList = [];
	let m = {};
	let s = "";
	{% for mani in manis %}
		m = {};
		// Using tojson filter to keep tags and quotes
		m.id = {{ mani.id|tojson }};
		m.gid = {{ mani.gid|tojson }};
		m.gname = {{ mani.gname|tojson }};
		m.soundbite = {{ mani.soundbite|tojson }};
		m.description = {{ mani.description|tojson }};
		m.notes = {{ mani.notes|tojson }};
		m.keywords = {{ mani.keywords|tojson }};
		m.rank = {{ mani.rank|tojson }};
		m.level = {{ mani.level|tojson }};
		maniList.push(m);
	{% endfor %}
	const mBox = document.getElementById('maniBox');
	mBox.manis = maniList;
	// Add flag to show whether user is authenticated
	// Defining as property of object so it cannot be changed
	let auth = false;
	{% if current_user.is_authenticated %}
		auth = true;
	{% endif %}
	let allowEdit = {};
	Object.defineProperty(allowEdit, 'editOK', {
		value: auth,
		writable: false
	});
	mBox.authStatus = allowEdit;
</script>

{% endblock %}
